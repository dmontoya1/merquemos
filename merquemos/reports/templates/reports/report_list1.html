
    <div id="register_products" class="modal">
        <form method="POST" action=".">
            <input type="hidden" name="report" value="register_products" />
            {% csrf_token %}
            <div class="modal-content">
                <h5>Reporte de  productos realizados a través de la plataforma</h5>
                <br>
                <h6>Fechas</h6>
                <div class="input-daterange input-group" >
                    <input type="date" class="input-sm form-control" name="start" />
                    <span class="input-group-addon">hasta</span>
                    <input type="date" class="input-sm form-control" name="end" />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-flat" type="submit">Generar</a>
            </div>
        </form>
    </div>

    <div id="number_services" class="modal">
        <form method="POST" action=".">
            <input type="hidden" name="report" value="number_services" />
            {% csrf_token %}
            <div class="modal-content">
                <h5>Reporte de número de servicios prestados por un establecimiento</h5>
                <br>
                <h6>Fechas</h6>
                <div class="input-daterange input-group" >
                    <input type="date" class="input-sm form-control" name="start" required/>
                    <span class="input-group-addon">hasta</span>
                    <input type="date" class="input-sm form-control" name="end" required/>
                </div>
                <select class="select2" name="store" class="browser-default" required>
                    <option disabled selected value="">Seleccione un establecimiento</option>
                    {% for store in stores %}
                        <option value="{{store.pk}}">{{store.name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modal-footer">
                <button class="btn-flat" type="submit">Generar</a>
            </div>
        </form>
    </div>

    <div id="rating" class="modal">
        <form method="POST" action=".">
            <input type="hidden" name="report" value="rating" />
            {% csrf_token %}
            <div class="modal-content">
                <h5>Reporte de calificaciones de la plataforma</h5>
                <br>
                <h6>Fechas</h6>
                <div class="input-daterange input-group" >
                    <input type="date" class="input-sm form-control" name="start" required/>
                    <span class="input-group-addon">hasta</span>
                    <input type="date" class="input-sm form-control" name="end" required/>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-flat" type="submit">Generar</a>
            </div>
        </form>
    </div>

    <div id="sales" class="modal">
        <form method="POST" action=".">
            <input type="hidden" name="report" value="sales" />
            {% csrf_token %}
            <div class="modal-content">
                <h5>Reporte de ventas realizadas a través de la plataforma de un establecimiento</h5>
                <br>
                <h6>Departamento</h6>
                <select name="state" class="browser-default state-select-sales" required>
                    <option disabled selected value="">Seleccione un departamento</option>
                    {% for state in states %}
                        <option value="{{state.pk}}">{{state.name}}</option>
                    {% endfor %}
                </select>
                <h6>Ciudad</h6>
                <select name="city" class="browser-default city-select-sales" required>
                    <option disabled selected value="">Seleccione primero un departamento</option>
                </select>
                <h6>Establecimiento</h6>
                <select name="store" class="browser-default store-select-sales" required>
                    <option disabled selected value="">Seleccione primero la ciudad</option>
                </select>
                <h6>Fechas</h6>
                <div class="input-daterange input-group" >
                    <input type="date" class="input-sm form-control" name="start" required/>
                    <span class="input-group-addon">hasta</span>
                    <input type="date" class="input-sm form-control" name="end" required/>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-flat" type="submit">Generar</a>
            </div>
        </form>
    </div>
    
    <div id="requests" class="modal">
        <form method="POST" action=".">
            <input type="hidden" name="report" value="requests" />
            {% csrf_token %}
            <div class="modal-content">
                <h5>Reporte de Solicitudes realizadas a través de la plataforma </h5>
                <br>
                <h6>Departamento</h6>
                <select name="state" class="browser-default state-select-request" required>
                    <option disabled selected value="">Seleccione un departamento</option>
                    {% for state in states %}
                        <option value="{{state.pk}}">{{state.name}}</option>
                    {% endfor %}
                </select>
                <h6>Ciudad</h6>
                <select name="city" class="browser-default city-select-request" required>
                    <option disabled selected value="">Seleccione primero un departamento</option>
                </select>
                <h6>Establecimiento</h6>
                <select name="store" class="browser-default store-select-request" required>
                    <option disabled selected value="">Seleccione primero la ciudad</option>
                </select>
                <h6>Fechas</h6>
                <div class="input-daterange input-group" >
                    <input type="date" class="input-sm form-control" name="start" required/>
                    <span class="input-group-addon">hasta</span>
                    <input type="date" class="input-sm form-control" name="end" required/>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-flat" type="submit">Generar</a>
            </div>
        </form>
    </div>
    
    <!-- <div class="row">
        <div class="app-list">
            <div class="app">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title black-text">Reportes</span>
                        <div class="row">
                            <div class="app-item col s6 m6 l4">
                                <a href="#register_products" class="modal-trigger" style="padding: 10px 0 !important;">
                                    <i class="material-icons">description</i>
                                    <h6 style="font-size: 0.9rem !important;">Productos realizados</h6>
                                </a>
                            </div>
                            <div class="app-item col s6 m6 l4">
                                <a href="#number_services" class="modal-trigger" style="padding: 10px 0 !important;">
                                    <i class="material-icons">description</i>
                                    <h6 style="font-size: 0.9rem !important;">Número de servicios por establecimiento</h6>
                                </a>
                            </div>
                            <div class="app-item col s6 m6 l4">
                                <a href="#rating" style="padding: 10px 0 !important;">
                                    <i class="material-icons">description</i>
                                    <h6 style="font-size: 0.9rem !important;">Calificaciones de la plataforma</h6>
                                </a>
                            </div>
                            <div class="app-item col s6 m6 l4">
                                <a href="#sales" style="padding: 10px 0 !important;">
                                    <i class="material-icons">description</i>
                                    <h6 style="font-size: 0.9rem !important;">Ventas realizadas</h6>
                                </a>
                            </div>
                            <div class="app-item col s6 m6 l4">
                                <a href="#requests" style="padding: 10px 0 !important;">
                                    <i class="material-icons">description</i>
                                    <h6 style="font-size: 0.9rem !important;">Solicitudes realizadas</h6>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
    <ul>
        <li class="contrast">
            <a href="/admin/reports/" title="Reportes">Reportes</a>
        </li>
        <li>
            <a href="#register_products" class="modal-trigger" style="padding: 10px 0 !important;">
                Productos realizados
            </a>
        </li>
        <li>
            <a href="#number_services" class="modal-trigger" style="padding: 10px 0 !important;">
                Número de servicios por establecimiento
            </a>
        </li>
        <li>
            <a href="#rating" style="padding: 10px 0 !important;">
                Calificaciones de la plataforma
            </a>
        </li>
        <li>
            <a href="#sales" style="padding: 10px 0 !important;">
                Ventas realizadas
            </a>
        </li>
        <li>
            <a href="#requests" style="padding: 10px 0 !important;">
                Solicitudes realizadas
            </a>
        </li>
    </ul>
<!-- {% endblock %}

{% block extrajs %} -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.modal').modal();
            axios.defaults.headers.common['Api-Key'] = '{{webclient_context_web_auth_token.key}}';
        });

        $('.state-select-sales').on('change', function(){
            axios.get('/api/manager/cities', {
                params: {
                    state_id: $(this).val()
                }
            })
            .then(function (response) {
                data = response.data
                $('.city-select-sales').empty()
                $.each( data, function( k, v ) {
                    $('.city-select-sales').append(
                        `<option value=${v.id}>${v.name}</option>`
                    )
                });
                $('.city-select-sales').prepend(
                    `<option selected disabled>Selecciona una ciudad</option>`
                )
            })
            .catch(function (error) {
                console.log(error);
            })
        })

        $('.city-select-sales').on('change', function(){
            axios.get('/api/stock/stores', {
                params: {
                    city_id: $(this).val()
                }
            })
            .then(function (response) {
                data = response.data
                $('.store-select-sales').empty()
                $.each( data, function( k, v ) {
                    $('.store-select-sales').append(
                        `<option value=${v.pk}>${v.name}</option>`
                    )
                });
                $('.store-select-sales').prepend(
                    `<option selected disabled>Selecciona un establecimiento</option>`
                )
            })
            .catch(function (error) {
                console.log(error);
            })
        })

        $('.state-select-request').on('change', function(){
            axios.get('/api/manager/cities', {
                params: {
                    state_id: $(this).val()
                }
            })
            .then(function (response) {
                data = response.data
                $('.city-select-request').empty()
                $.each( data, function( k, v ) {
                    $('.city-select-request').append(
                        `<option value=${v.id}>${v.name}</option>`
                    )
                });
                $('.city-select-request').prepend(
                    `<option selected disabled>Selecciona una ciudad</option>`
                )
            })
            .catch(function (error) {
                console.log(error);
            })
        })

        $('.city-select-request').on('change', function(){
            axios.get('/api/stock/stores', {
                params: {
                    city_id: $(this).val()
                }
            })
            .then(function (response) {
                data = response.data
                console.log(data)
                $('.store-select-request').empty()
                $.each( data, function( k, v ) {
                    $('.store-select-request').append(
                        `<option value=${v.pk}>${v.name}</option>`
                    )
                });
                $('.store-select-request').prepend(
                    `<option selected disabled>Selecciona un establecimiento</option>`
                )
            })
            .catch(function (error) {
                console.log(error);
            })
        })
    </script>
<!-- {% endblock %} -->
